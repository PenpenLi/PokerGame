-----friendadd.lua-----HJH-----2013-2-17-----------super_class.FriendAdd(Window)----------------------添加好友申请界面local _window_size								= {width = 800, height = 480}local _exit_info 								= {width = 38, height = 38, image = {UILH_COMMON.close_btn_z,UILH_COMMON.close_btn_z} }--xiehande 通用按钮修改 btn_lv->button3local _accept_info								= {width = 126, height = 43, text = Lang.friend.friendadd[1], image = {UILH_COMMON.button2_sel, UILH_COMMON.button2_sel} } -- [1]="接受"local _ok_info									= {width = 126, height = 43, text = Lang.friend.friendadd[2], image = {UILH_COMMON.btn4_nor, UILH_COMMON.btn4_nor} } -- [2]="全部同意"local _reject_info								= {width = 126, height = 43, text = Lang.friend.friendadd[3], image = {UILH_COMMON.btn4_nor, UILH_COMMON.btn4_nor} } -- [3]="全部拒绝"local _scroll_info								= {width = 344, height = 165, maxnum = 20, ttype = TYPE_HORIZONTAL_EX, gapSize = 0}local _reinit_info								= nil-----------function FriendAdd:createAdd(width, height)	-----------	-- require "model/FriendModel/FriendAddModel"	-- require "UI/component/TextButton"	-- require "UI/component/Scroll"	-- require "UI/component/Button"	-- require "UI/component/Image"	-----------	panel = self.view;	self:setTouchClickFun(FriendInfoModel.exit_fun)    local bg_1 = CCBasePanel:panelWithFile(10, 71, 408, 200,UILH_COMMON.bottom_bg, 500, 500)    panel:addChild(bg_1)    -- local bg_2 = CCBasePanel:panelWithFile(28, 82, 360, 180,UIPIC_ConfirmWin_009, 500, 500)    -- panel:addChild(bg_2) --    local spr_bg_size = self.view:getSize() --    local title = ZImage:create( self.view, UIPIC_COMMON_TIPS , spr_bg_size.width/2,  spr_bg_size.height-29, -1,-1,999 );	-- title.view:setAnchorPoint(0.5,0.5)	self.ok_button = ZTextButton:create( nil, _ok_info.text, _ok_info.image, nil, 57, 17, -1, -1, nil, _window_size.width, _window_size.width)	self.ok_button:setTouchClickFun(FriendAddModel.ok_btn_click_function)	-----------	self.reject_button = ZTextButton:create( nil, _reject_info.text, _reject_info.image, nil, width - 57 - _reject_info.width, 17, -1, -1, nil, _window_size.width, _window_size.width)	self.reject_button:setTouchClickFun(FriendAddModel.reject_btn_click_function)	-----------	self.scroll = ZScroll:create( nil, nil, 30, 10 + _ok_info.height + 40 , _scroll_info.width, _scroll_info.height, _scroll_info.maxnum, _scroll_info.ttype )	self.scroll:setScrollCreatFunction(FriendAddModel.scroll_create_function)	-----------	self:setExitBtnFun(FriendAddModel.exit_btn_click_function)	-----------	-- self.bg = ZImage:create( nil, UIPIC_GRID_nine_grid_bg3, 16 + 6, 20 + _ok_info.height, width - 36 - 7, height - _exit_info.height - _ok_info.height - 10, nil, _window_size.width, _window_size.width)	-----------	-- self.view:addChild(self.bg.view)	self.view:addChild(self.scroll.view)	self.view:addChild(self.reject_button.view)	self.view:addChild(self.ok_button.view)	-- self.view:addChild(self.exit_button.view)	-----------	-----------	self.view:setPosition(270,160);end----------------------function FriendAdd:model_function(eventType)	if eventType == FriendConfig.EventType.SCROLL_CLEAR then		self.scroll.view:reinitScroll()	elseif eventType == FriendConfig.EventType.SCROLL_ADD_ITEM then		self.scroll:refresh()	elseif eventType == FriendConfig.EventType.SCROLL_INFO then		local scrollSize = self.scroll:getSize()		local scrollMaxNum = self.scroll:getMaxNum()		return { width = scrollSize.width, height = scrollSize.height, maxnum = scrollMaxNum}	endend----------------------function FriendAdd:__init(window_name, texture_name, is_grid, width, height,title_text)	local bg = ZImage:create( self.view, UILH_COMMON.dialog_bg, 0, 0, width, height - 25, -1,500,500 )    --标题背景	local title_bg = ZImage:create( self.view,UILH_COMMON.title_bg, 0, 0, -1, -1 )	local title_bg_size = title_bg:getSize()	title_bg:setPosition( ( width - title_bg_size.width ) / 2, height - title_bg_size.height-10 )    	local t_width = title_bg:getSize().width	local t_height = title_bg:getSize().height	self.window_title = ZImage:create(title_bg, title_text , t_width/2,  t_height-27, -1,-1,999 );	self.window_title.view:setAnchorPoint(0.5,0.5)    --关闭按钮	local function _close_btn_fun()		Instruction:handleUIComponentClick(instruct_comps.CLOSE_BTN)		UIManager:hide_window(window_name)	end	local _exit_btn_info = { img = UILH_COMMON.close_btn_z, z = 1000, width = 60, height = 60 }	self._exit_btn = ZButton:create(self.view, _exit_btn_info.img, _close_btn_fun,0,0,_exit_btn_info.width,_exit_btn_info.height,_exit_btn_info.z);	local exit_btn_size = self._exit_btn:getSize()	self._exit_btn:setPosition( width - exit_btn_size.width+11 , height - exit_btn_size.height-20)	self:createAdd(width, height)endfunction FriendAdd:setExitBtnFun(tFun)	self._exit_btn:setTouchClickFun(tFun)end------------------------ function FriendAdd:reinit_win_function(ok_fun, reject_fun, scroll_fun, exit_fun )-- 	self.ok_button:setTouchClickFun(ok_fun)-- 	self.reject_button:setTouchClickFun(reject_fun)-- 	self.scroll:setTouchClickFun(scroll_fun)-- 	self.exit_button:setTouchClickFun(exit_fun)-- end